apply plugin: 'scala'
apply plugin: 'idea'

version = "0.1"
group = "com.nabijaczleweli.cgol" // http://maven.apache.org/guides/mini/guide-naming-conventions.html
archivesBaseName = "Scala-CGOL"

repositories {
    mavenCentral()
}

dependencies {
    compile 'org.scala-lang:scala-library:2.11.0-RC3'
    testCompile "org.scala-lang:scala-library:2.11.0-RC3"
}

tasks.withType(ScalaCompile) {
    configure(scalaCompileOptions.forkOptions) {
        memoryMaximumSize = '1g'
        jvmArgs = ['-XX:MaxPermSize=512m']
    }
}

task('push') {
    doLast {
        try {
            Runtime.getRuntime().exec('git')
        } catch (Throwable ignored) {
            System.err.println('\n\n\nYou do NOT have git! Go get some!\n\n\n')
            throw new StopExecutionException()
        }
        Runtime.getRuntime().exec 'git add -A'
        Runtime.getRuntime().exec 'git commit -m\"$message\"'
        Runtime.getRuntime().exec 'git push'
    }
}